<!doctype html>
<html lang="fa" dir="rtl" class="scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#020005">
  <meta name="description" content="Ù…Ø±Ø¬Ø¹ ØªØ®ØµØµÛŒ Ù…Ø§Ù†Ú¯Ø§ Ùˆ Ù…Ø§Ù†Ù‡ÙˆØ§ Ø¨Ø§ ØªØ±Ø¬Ù…Ù‡ Ø§Ø®ØªØµØ§ØµÛŒ Ùˆ Ø¨Ø¯ÙˆÙ† Ø³Ø§Ù†Ø³ÙˆØ± Ø¨Ø§ Ú©ÛŒÙÛŒØª Ø¨Ø§Ù„Ø§">
  <title>ØªÙˆÙ…Ù†Ú¯Ø§ | Ù…Ø±Ø¬Ø¹ ØªØ®ØµØµÛŒ Ù…Ø§Ù†Ú¯Ø§ Ùˆ Ù…Ø§Ù†Ù‡ÙˆØ§ Ø¨Ø§ ØªØ±Ø¬Ù…Ù‡ Ø§Ø®ØªØµØ§ØµÛŒ Ùˆ Ø¨Ø¯ÙˆÙ† Ø³Ø§Ù†Ø³ÙˆØ± Ø¨Ø§ Ú©ÛŒÙÛŒØª Ø¨Ø§Ù„Ø§</title>

  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

  <style>
    :root { 
      --bg-dark: #020005;
      --bg-card: #0e0e12;
      --accent: #7c3aed; 
      --accent-glow: rgba(124, 58, 237, 0.4); 
    }
    
    body { 
      background-color: var(--bg-dark);
      background-image: 
        radial-gradient(circle at 15% 15%, rgba(124, 58, 237, 0.07), transparent 40%), 
        radial-gradient(circle at 85% 85%, rgba(244, 63, 94, 0.05), transparent 40%);
      background-attachment: fixed;
      color: #e2e8f0; 
      font-family: 'Vazir', sans-serif;
      overflow-x: hidden; 
      -webkit-tap-highlight-color: transparent;
    }

    /* Glass Effect */
    .glass-nav {
      background: rgba(2, 0, 5, 0.85);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }
    
    .glass-card {
        background: rgba(20, 20, 25, 0.6);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.08);
    }
    
    .glass-modal {
        background: rgba(10, 10, 14, 0.9);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
    }

    /* Interactive Elements */
    .manga-card { 
        transform: translateZ(0); 
        transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease;
    }
    @media (hover: hover) {
        .manga-card:hover { 
            transform: translateY(-8px) scale(1.02); 
            box-shadow: 0 12px 40px -10px var(--accent-glow);
            z-index: 10;
        }
    }
    .manga-card:active { transform: scale(0.96); }

    /* Custom Drawer Animation */
    #filter-drawer {
      transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      box-shadow: -8px 0 32px rgba(0,0,0,0.8);
    }
    .drawer-closed #filter-drawer { transform: translateX(100%); }
    .drawer-open #filter-drawer { transform: translateX(0); }

    /* Modal Animation */
    .modal-enter { opacity: 0; transform: scale(0.95); pointer-events: none; }
    .modal-active { opacity: 1; transform: scale(1); pointer-events: auto; }

    /* Utils */
    .text-glow { text-shadow: 0 0 20px rgba(124, 58, 237, 0.5); }
    .custom-scroll::-webkit-scrollbar { width: 5px; }
    .custom-scroll::-webkit-scrollbar-track { bg: transparent; }
    .custom-scroll::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
  </style>
</head>
<body class="drawer-closed flex flex-col min-h-screen">

  <noscript>
      <div class="fixed inset-0 z-[999] bg-[#020005] flex items-center justify-center p-6">
          <div class="glass-card p-8 rounded-2xl max-w-md text-center border border-rose-500/30 shadow-[0_0_30px_rgba(244,63,94,0.2)]">
              <div class="w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto mb-4 text-rose-500">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>
              </div>
              <h2 class="text-xl font-black text-white mb-2">Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø§Ø³Øª</h2>
              <p class="text-gray-400 text-sm leading-7">Ø¨Ø±Ø§ÛŒ ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ù…Ù„ Ùˆ ØªØ¹Ø§Ù…Ù„ÛŒ ØªÙˆÙ…Ø§Ù†Ú¯Ø§ØŒ Ù„Ø·ÙØ§Ù‹ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…Ø±ÙˆØ±Ú¯Ø± Ø®ÙˆØ¯ Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯. Ø§ÛŒÙ† ÙˆØ¨â€ŒØ§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ ØµØ­ÛŒØ­ Ø¨Ù‡ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù† ÙˆØ¨ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ø¯.</p>
          </div>
      </div>
  </noscript>

  <script id="DATA_SOURCE" type="application/json">[{"chapter": "83", "cover": "https://cdn.jsdelivr.net/gh/im-abi-oo/mioooo@main/oo.jpg", "genres": ["\u0639\u0627\u0634\u0642\u0627\u0646\u0647", "\u062f\u0631\u0627\u0645", "\u0627\u06cc\u0686\u06cc"], "slug": "Domestic-Girlfriend-1234", "status": "\u067e\u0627\u06cc\u0627\u0646 \u06cc\u0627\u0641\u062a\u0647", "summary": "\u0646\u0627\u062a\u0633\u0648 \u067e\u0633\u0631\u06cc \u062f\u0628\u06cc\u0631\u0633\u062a\u0627\u0646\u06cc \u0627\u0633\u062a \u06a9\u0647 \u0639\u0627\u0634\u0642 \u0645\u0639\u0644\u0645\u0634\u060c \u0647\u06cc\u0646\u0627 \u0645\u06cc\u200c\u0634\u0648\u062f \u0627\u0645\u0627...", "titleEn": "Domestic Girlfriend", "titleFa": "\u062f\u0648\u0633\u062a \u062f\u062e\u062a\u0631 \u062e\u0627\u0646\u06af\u06cc", "type": "Manga", "updatedAt": "2024-05-20"}]</script>
  <script id="CONFIG_SOURCE" type="application/json">{"api": {"base": "https://two-api-iksq.onrender.com", "meEndpoint": "/auth/me"}, "footerLinks": [{"items": [{"text": "\u0635\u0641\u062d\u0647 \u0627\u0635\u0644\u06cc", "url": "#"}, {"text": "\u067e\u0646\u0644 \u06a9\u0627\u0631\u0628\u0631\u06cc", "url": "/panel"}, {"text": "\u0627\u0634\u062a\u0631\u0627\u06a9 \u0648\u06cc\u0698\u0647", "url": "/panel/vip"}, {"text": "\u0642\u0648\u0627\u0646\u06cc\u0646 \u0633\u0627\u06cc\u062a", "url": "/terms"}], "title": "\u062f\u0633\u062a\u0631\u0633\u06cc \u0633\u0631\u06cc\u0639"}, {"items": [{"text": "\u0622\u0631\u0634\u06cc\u0648 \u0645\u0627\u0646\u0647\u0648\u0627", "url": "#type=Manhwa"}, {"text": "\u0622\u0631\u0634\u06cc\u0648 \u0645\u0627\u0646\u06af\u0627", "url": "#type=Manga"}, {"text": "\u0645\u062d\u0628\u0648\u0628\u200c\u062a\u0631\u06cc\u0646\u200c\u0647\u0627", "url": "#sort=chapters"}, {"text": "\u062c\u062f\u06cc\u062f\u062a\u0631\u06cc\u0646\u200c\u0647\u0627", "url": "#sort=newest"}], "title": "\u062f\u0633\u062a\u0647\u200c\u0628\u0646\u062f\u06cc\u200c\u0647\u0627"}], "routes": {"channel": "https://t.me/TwoManga", "login": "/auth", "panel": "/panel", "support": "https://t.me/alizenin"}, "siteMeta": {"description": "\u0645\u0631\u062c\u0639 \u062a\u062e\u0635\u0635\u06cc \u0645\u0627\u0646\u06af\u0627 \u0648 \u0645\u0627\u0646\u0647\u0648\u0627 \u0628\u0627 \u062a\u0631\u062c\u0645\u0647 \u0627\u062e\u062a\u0635\u0627\u0635\u06cc \u0648 \u0628\u062f\u0648\u0646 \u0633\u0627\u0646\u0633\u0648\u0631 \u0628\u0627 \u06a9\u06cc\u0641\u06cc\u062a \u0628\u0627\u0644\u0627", "en": "TwoManga", "fa": "\u062a\u0648\u0645\u0646\u06af\u0627"}, "socials": [{"icon": "send", "url": "https://t.me/saino_tm"}, {"icon": "instagram", "url": "#"}], "ui": {"copyright": "\u00a9 2025 TwoManga Systems", "loginBtn": "\u0648\u0631\u0648\u062f / \u0639\u0636\u0648\u06cc\u062a", "madeBy": "Designed by IM_ABI", "noSub": "\u0628\u062f\u0648\u0646 \u0627\u0634\u062a\u0631\u0627\u06a9", "searchPlaceholder": "\u062c\u0633\u062a\u062c\u0648\u06cc \u0646\u0627\u0645\u060c \u0698\u0627\u0646\u0631...", "subscribeBtn": "\u062e\u0631\u06cc\u062f \u0627\u0634\u062a\u0631\u0627\u06a9", "vipDays": "\u0631\u0648\u0632 \u0628\u0627\u0642\u06cc\u200c\u0645\u0627\u0646\u062f\u0647"}}</script>

  <nav class="fixed top-0 inset-x-0 z-50 glass-nav h-16 md:h-20 transition-all duration-300">
    <div class="max-w-[1900px] mx-auto px-4 h-full flex items-center justify-between">
      
      <div class="flex items-center gap-6">
        <a href="#" class="flex items-center gap-3 group select-none outline-none">
          <div class="w-10 h-10 bg-gradient-to-br from-violet-600 to-indigo-700 rounded-xl flex items-center justify-center text-white shadow-[0_0_15px_rgba(124,58,237,0.4)] group-hover:scale-105 transition">
            <span class="font-black text-xl">TM</span>
          </div>
          <div class="hidden md:flex flex-col">
             <span class="text-lg font-black tracking-tight text-white group-hover:text-violet-200 transition">TwoManga</span>
          </div>
        </a>

        <div class="hidden lg:flex items-center gap-1 p-1 bg-white/5 rounded-xl border border-white/5">
            <a href="javascript:void(0)" onclick="App.setType('all')" id="nav-all" class="nav-filter px-5 py-1.5 text-xs font-bold rounded-lg transition-all text-gray-400 hover:text-white hover:bg-white/5">Ù‡Ù…Ù‡</a>
            <a href="javascript:void(0)" onclick="App.setType('Manhwa')" id="nav-Manhwa" class="nav-filter px-5 py-1.5 text-xs font-bold rounded-lg transition-all text-gray-400 hover:text-white hover:bg-white/5">Ù…Ø§Ù†Ù‡ÙˆØ§</a>
            <a href="javascript:void(0)" onclick="App.setType('Manga')" id="nav-Manga" class="nav-filter px-5 py-1.5 text-xs font-bold rounded-lg transition-all text-gray-400 hover:text-white hover:bg-white/5">Ù…Ø§Ù†Ú¯Ø§</a>
        </div>
      </div>

      <div class="flex items-center gap-2 md:gap-4">
        
        <div class="relative group">
            <div class="hidden md:flex items-center bg-[#151518] border border-white/10 rounded-xl h-10 px-3 focus-within:border-accent focus-within:ring-1 focus-within:ring-accent/50 transition-all w-64 shadow-inner">
                <i data-lucide="search" class="w-4 h-4 text-gray-500 ml-2"></i>
                <input type="text" id="quickSearch" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†Ø§Ù…ØŒ Ú˜Ø§Ù†Ø±..." class="bg-transparent border-none outline-none text-xs font-bold text-white w-full placeholder-gray-600 h-full">
            </div>
            <button onclick="App.toggleMobileSearch()" class="md:hidden w-10 h-10 flex items-center justify-center bg-white/5 rounded-xl active:bg-white/10 transition">
                <i data-lucide="search" class="w-5 h-5 text-white"></i>
            </button>
        </div>

        <button onclick="App.toggleDrawer()" class="w-10 h-10 flex items-center justify-center bg-white/5 hover:bg-white/10 rounded-xl transition border border-white/5 text-white relative">
            <i data-lucide="sliders-horizontal" class="w-5 h-5"></i>
            <span id="active-filter-dot" class="hidden absolute top-2 right-2.5 w-1.5 h-1.5 bg-rose-500 rounded-full animate-pulse"></span>
        </button>

        <a href="/panel" class="hidden md:flex items-center gap-2 bg-gradient-to-r from-amber-400 to-amber-600 text-black px-5 py-2 rounded-xl text-xs font-black shadow-lg shadow-amber-500/20 hover:-translate-y-0.5 transition">
            <i data-lucide="crown" class="w-3.5 h-3.5 fill-black"></i>
            <span>Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©</span>
        </a>
        
        <div id="auth-box" class="ml-1"></div>
      </div>
    </div>

    <div id="mobile-search-bar" class="absolute top-[63px] inset-x-0 glass-card border-x-0 border-t-0 border-b border-white/10 p-3 transform -translate-y-[200%] transition-transform duration-300 z-[-1] flex gap-2">
         <input type="text" id="mobileSearchInput" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†Ø§Ù…ØŒ Ú˜Ø§Ù†Ø±..." class="w-full bg-white/5 rounded-xl px-4 py-3 text-sm text-white outline-none focus:bg-white/10 font-medium">
         <button onclick="App.toggleMobileSearch()" class="p-3 bg-white/5 rounded-xl text-white active:scale-95 transition"><i data-lucide="x" class="w-5 h-5"></i></button>
    </div>
  </nav>

  <div id="backdrop" onclick="App.toggleDrawer()" class="fixed inset-0 bg-black/60 z-[60] opacity-0 pointer-events-none transition-all duration-300 backdrop-blur-sm"></div>
  <aside id="filter-drawer" class="fixed inset-y-0 right-0 w-[85%] max-w-[400px] bg-[#101014] z-[70] border-l border-white/10 flex flex-col h-full shadow-2xl">
      
      <div class="flex items-center justify-between p-5 border-b border-white/5 bg-[#101014]">
          <span class="font-black text-lg text-white flex items-center gap-2">
            <i data-lucide="filter" class="w-5 h-5 text-accent"></i> ÙÛŒÙ„ØªØ± Ù¾ÛŒØ´Ø±ÙØªÙ‡
          </span>
          <button onclick="App.toggleDrawer()" class="w-8 h-8 flex items-center justify-center hover:bg-white/5 rounded-full transition"><i data-lucide="x" class="w-5 h-5 text-gray-400"></i></button>
      </div>

      <div class="flex-grow overflow-y-auto p-5 space-y-8 custom-scroll">
          
          <div class="lg:hidden">
              <label class="text-xs font-bold text-gray-500 block mb-3">Ù†ÙˆØ¹ Ø§Ø«Ø±</label>
              <div class="flex gap-2 p-1 bg-white/5 rounded-xl">
                  <button onclick="App.setType('all'); App.closeDrawerIfMobile()" class="mob-filter flex-1 py-2.5 text-[11px] font-bold text-center rounded-lg transition-colors text-gray-400" data-type="all">Ù‡Ù…Ù‡</button>
                  <button onclick="App.setType('Manhwa'); App.closeDrawerIfMobile()" class="mob-filter flex-1 py-2.5 text-[11px] font-bold text-center rounded-lg transition-colors text-gray-400" data-type="Manhwa">Ù…Ø§Ù†Ù‡ÙˆØ§</button>
                  <button onclick="App.setType('Manga'); App.closeDrawerIfMobile()" class="mob-filter flex-1 py-2.5 text-[11px] font-bold text-center rounded-lg transition-colors text-gray-400" data-type="Manga">Ù…Ø§Ù†Ú¯Ø§</button>
              </div>
          </div>

          <div>
              <label class="text-xs font-bold text-gray-500 block mb-3">Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³</label>
              <div class="grid grid-cols-1 gap-2">
                 <button onclick="App.updateSort('newest')" class="sort-btn text-right px-4 py-3 rounded-xl bg-white/5 text-sm font-bold text-gray-300 hover:bg-white/10 transition border border-transparent data-[active=true]:border-accent data-[active=true]:text-accent" data-val="newest">
                    ğŸ”¥ Ø¢Ø®Ø±ÛŒÙ† Ø¢Ù¾Ø¯ÛŒØª (Ù¾ÛŒØ´â€ŒÙØ±Ø¶)
                 </button>
                 <button onclick="App.updateSort('chapters')" class="sort-btn text-right px-4 py-3 rounded-xl bg-white/5 text-sm font-bold text-gray-300 hover:bg-white/10 transition border border-transparent data-[active=true]:border-accent data-[active=true]:text-accent" data-val="chapters">
                    ğŸ“š Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ú†Ù¾ØªØ±
                 </button>
                 <button onclick="App.updateSort('alpha')" class="sort-btn text-right px-4 py-3 rounded-xl bg-white/5 text-sm font-bold text-gray-300 hover:bg-white/10 transition border border-transparent data-[active=true]:border-accent data-[active=true]:text-accent" data-val="alpha">
                    ğŸ”¤ Ø­Ø±ÙˆÙ Ø§Ù„ÙØ¨Ø§
                 </button>
              </div>
          </div>

          <div>
              <div class="flex justify-between items-center mb-3">
                 <label class="text-xs font-bold text-gray-500">Ú˜Ø§Ù†Ø±Ù‡Ø§ (Ø§Ù†ØªØ®Ø§Ø¨ Ú†Ù†Ø¯Ú¯Ø§Ù†Ù‡)</label>
                 <button onclick="App.clearGenres()" class="text-[10px] text-accent hover:text-white transition bg-accent/10 px-2 py-1 rounded">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù‡Ù…Ù‡</button>
              </div>
              <div id="genres-container" class="flex flex-wrap gap-2"></div>
          </div>
      </div>

      <div class="p-5 bg-[#101014] border-t border-white/5">
          <button onclick="App.toggleDrawer()" class="w-full py-4 bg-accent hover:bg-violet-600 text-white font-bold rounded-xl active:scale-95 transition shadow-lg shadow-accent/25 flex justify-center items-center gap-2">
              Ù…Ø´Ø§Ù‡Ø¯Ù‡ <span id="drawer-count" class="font-black bg-black/20 px-2 py-0.5 rounded text-sm">0</span> Ø¹Ù†ÙˆØ§Ù†
          </button>
      </div>
  </aside>

  <div id="vip-modal" class="fixed inset-0 z-[100] flex items-center justify-center px-4 modal-enter transition-all duration-300">
      <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="App.toggleVipModal(false)"></div>
      <div class="glass-modal w-full max-w-sm rounded-3xl p-6 md:p-8 relative transform transition-transform duration-300 scale-100">
          <button onclick="App.toggleVipModal(false)" class="absolute top-4 right-4 text-gray-400 hover:text-white transition p-2 bg-white/5 rounded-full"><i data-lucide="x" class="w-5 h-5"></i></button>
          
          <div class="flex flex-col items-center text-center">
              <div class="w-20 h-20 rounded-2xl bg-gradient-to-tr from-amber-400 to-amber-600 flex items-center justify-center mb-6 shadow-[0_0_40px_rgba(245,158,11,0.4)]">
                  <i data-lucide="crown" class="w-10 h-10 text-black fill-black"></i>
              </div>
              
              <h3 class="text-2xl font-black text-white mb-3">Ø§Ø´ØªØ±Ø§Ú© ÙˆÛŒÚ˜Ù‡ Ù†ÛŒØ§Ø² Ø§Ø³Øª</h3>
              <p class="text-gray-400 text-sm leading-7 mb-8">
                  Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† Ù…Ø­ØªÙˆØ§ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ Ùˆ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØªØŒ Ù„Ø·ÙØ§Ù‹ Ø§Ø´ØªØ±Ø§Ú© ÙˆÛŒÚ˜Ù‡ ØªÙ‡ÛŒÙ‡ Ú©Ù†ÛŒØ¯.
              </p>
              
              <div class="flex gap-3 w-full">
                  <a href="/panel" class="flex-1 bg-white text-black font-black py-3.5 rounded-xl hover:bg-gray-200 transition shadow-[0_0_20px_rgba(255,255,255,0.2)]">Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©</a>
                  <button onclick="App.toggleVipModal(false)" class="flex-1 border border-white/10 hover:bg-white/5 text-white font-bold py-3.5 rounded-xl transition">Ø¨Ø¹Ø¯Ø§Ù‹</button>
              </div>
          </div>
      </div>
  </div>

  <main class="flex-grow pt-24 md:pt-32 px-4 pb-16 w-full max-w-[1900px] mx-auto space-y-12">
      
      <section id="hero-slider" class="relative rounded-2xl md:rounded-3xl overflow-hidden aspect-[16/8] md:aspect-[24/9] lg:aspect-[3/1] bg-gray-900 border border-white/5 shadow-2xl group">
           <div id="slider-track" class="w-full h-full relative"></div>
           <div class="absolute bottom-5 right-6 flex gap-1.5 z-20" id="slider-dots"></div>
           <div class="absolute inset-0 bg-gradient-to-t from-[#020005] via-transparent to-transparent z-10 pointer-events-none"></div>
      </section>

      <div id="main-anchor">
        <div class="flex items-end justify-between mb-8 px-1">
            <div class="flex items-center gap-3">
                <div class="w-1.5 h-6 bg-gradient-to-b from-accent to-purple-800 rounded-full shadow-[0_0_10px_var(--accent)]"></div>
                <h1 class="text-xl md:text-2xl font-black text-white tracking-wide">Ø¢Ø±Ø´ÛŒÙˆ Ø¹Ù†Ø§ÙˆÛŒÙ†</h1>
            </div>
            <span class="text-[10px] md:text-xs text-gray-500 font-bold bg-white/5 px-3 py-1.5 rounded-full border border-white/5">
                ØµÙØ­Ù‡ <span id="page-num" class="text-accent">1</span>
            </span>
        </div>

        <div id="grid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-x-4 gap-y-8 md:gap-x-6 md:gap-y-10 min-h-[500px]">
            </div>

        <div id="pagination" class="mt-16 flex justify-center flex-wrap gap-2"></div>
      </div>

  </main>

  <footer class="bg-[#08080b] border-t border-white/5 pt-16 pb-8 px-6">
    <div class="max-w-[1900px] mx-auto grid grid-cols-1 md:grid-cols-12 gap-12">
        
        <div class="md:col-span-5 lg:col-span-4 space-y-6">
             <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-white text-black flex items-center justify-center font-black text-xl">TM</div>
                <span class="text-2xl font-black text-white">ØªÙˆÙ…Ù†Ú¯Ø§</span>
             </div>
             <p class="text-sm text-gray-400 leading-7 text-justify pl-4">Ù…Ø±Ø¬Ø¹ ØªØ®ØµØµÛŒ Ù…Ø§Ù†Ú¯Ø§ Ùˆ Ù…Ø§Ù†Ù‡ÙˆØ§ Ø¨Ø§ ØªØ±Ø¬Ù…Ù‡ Ø§Ø®ØªØµØ§ØµÛŒ Ùˆ Ø¨Ø¯ÙˆÙ† Ø³Ø§Ù†Ø³ÙˆØ± Ø¨Ø§ Ú©ÛŒÙÛŒØª Ø¨Ø§Ù„Ø§</p>
             <div class="flex gap-4 pt-2" id="social-links"></div>
        </div>
        
        <div class="md:col-span-7 lg:col-span-8 grid grid-cols-2 md:grid-cols-3 gap-8">
           <div id="footer-dynamic-links" class="contents"></div>
        </div>
    </div>

    <div class="mt-16 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-4 text-[11px] text-gray-600 font-bold tracking-widest uppercase">
        <span>Â© 2025 TwoManga Systems</span>
        <span>Designed by IM_ABI</span>
    </div>
  </footer>

  <script>
    // --- API CONFIG ---
    const API_BASE = "https://two-api-iksq.onrender.com";

    const App = (() => {
        // --- DATA LOAD ---
        const RAW_ITEMS = JSON.parse(document.getElementById('DATA_SOURCE').textContent || '[]');
        const CONFIG = JSON.parse(document.getElementById('CONFIG_SOURCE').textContent || '{}');
        
        // --- FUSE.js (ENHANCED SEARCH) ---
        const fuse = new Fuse(RAW_ITEMS, { 
            keys: [
                {name: 'titleFa', weight: 2},
                {name: 'titleEn', weight: 1.5},
                {name: 'summary', weight: 0.8},
                {name: 'genres', weight: 0.5},
                {name: 'status', weight: 0.5}
            ], 
            threshold: 0.4,
            ignoreLocation: true,
            useExtendedSearch: true
        });

        // --- STATE ---
        let state = {
            page: 1,
            limit: 24,
            filter: {
                type: 'all', 
                sort: 'newest',
                genres: [],
                q: '' 
            },
            filtered: [],
            user: null
        };

        // --- AUTH & SUBSCRIPTION (UPDATED) ---
        const checkAuth = async () => {
            const box = document.getElementById('auth-box');
            // Retrieving 'at' (Access Token)
            const at = localStorage.getItem('at');

            // Render Login Button Helper
            const showLogin = () => {
                box.innerHTML = `
                    <a href="${CONFIG.routes.login}" class="h-9 px-4 md:h-10 bg-white hover:bg-gray-200 text-black font-bold text-xs rounded-xl flex items-center gap-2 transition shadow-[0_0_15px_rgba(255,255,255,0.1)]">
                        <span class="hidden md:inline">${CONFIG.ui.loginBtn}</span>
                        <span class="md:hidden">ÙˆØ±ÙˆØ¯</span>
                        <i data-lucide="log-in" class="w-3.5 h-3.5"></i>
                    </a>`;
                state.user = null;
                // Re-render grid to apply locks for non-users
                renderGrid();
            };

            if(!at) { showLogin(); return; }

            // Validate Token and Check Subscription via API
            try {
                box.innerHTML = `<div class="w-10 h-10 rounded-xl bg-white/5 animate-pulse"></div>`; // Loading state

                const res = await fetch(`${API_BASE}/auth/me`, {
                    method: 'GET',
                    headers: { 'Authorization': `Bearer ${at}` }
                });

                if (res.status === 200) {
                    const userData = await res.json();
                    
                    // Map API response to local state
                    // 'days_left' comes from API, mapping it to 'days' for local logic
                    state.user = { 
                        username: userData.username,
                        role: userData.role,
                        days: userData.days_left, 
                        expiry: userData.expiry_iso
                    };
                    
                    const hasSub = state.user.days > 0;

                    // Render Profile Button
                    box.innerHTML = `
                        <a href="${CONFIG.routes.panel}" class="relative w-10 h-10 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 hover:bg-white/10 transition flex items-center justify-center group overflow-hidden">
                            <i data-lucide="user" class="w-5 h-5 text-gray-300 group-hover:text-white transition"></i>
                            <span class="absolute bottom-0 inset-x-0 h-0.5 ${hasSub ? 'bg-emerald-500 shadow-[0_0_8px_#10b981]' : 'bg-rose-500'}"></span>
                        </a>
                    `;
                    // Update grid to unlock content if subscribed
                    renderGrid();
                } else {
                    // Token expired or invalid
                    throw new Error("Unauthorized");
                }
            } catch (error) {
                console.warn("Auth check failed:", error);
                localStorage.removeItem('at');
                localStorage.removeItem('rt');
                showLogin();
            }
        };

        // --- HASH & URL MANAGER ---
        const updateHash = () => {
            const p = new URLSearchParams();
            if (state.filter.type !== 'all') p.set('type', state.filter.type);
            if (state.filter.sort !== 'newest') p.set('sort', state.filter.sort);
            if (state.filter.q) p.set('q', state.filter.q);
            if (state.filter.genres.length > 0) p.set('genres', state.filter.genres.join(','));
            const str = p.toString();
            window.history.replaceState(null, null, str ? '#' + str : window.location.pathname);
            syncUI();
        };

        const parseHash = () => {
            const hash = window.location.hash.slice(1);
            const params = new URLSearchParams(hash);
            let newState = {
                type: 'all',
                sort: 'newest',
                genres: [],
                q: ''
            };
            if (params.has('type')) newState.type = params.get('type');
            if (params.has('sort')) newState.sort = params.get('sort');
            if (params.has('q')) newState.q = params.get('q');
            if (params.has('genres')) newState.genres = params.get('genres').split(',').filter(x => x);
            state.filter = newState;
            document.getElementById('quickSearch').value = state.filter.q;
            document.getElementById('mobileSearchInput').value = state.filter.q;
            syncUI();
            applyFilters(true);
        };

        const syncUI = () => {
            ['all', 'Manhwa', 'Manga'].forEach(t => {
                const isActive = state.filter.type === t;
                const el = document.getElementById(`nav-${t}`);
                if(el) {
                    el.className = isActive 
                        ? "nav-filter px-5 py-1.5 text-xs font-bold rounded-lg transition-all bg-white text-black shadow-lg shadow-white/10"
                        : "nav-filter px-5 py-1.5 text-xs font-bold rounded-lg transition-all text-gray-400 hover:text-white hover:bg-white/5";
                }
                const mobEl = document.querySelector(`.mob-filter[data-type="${t}"]`);
                if(mobEl) {
                     mobEl.className = isActive 
                        ? "mob-filter flex-1 py-2.5 text-[11px] font-bold text-center rounded-lg transition-colors bg-accent text-white shadow-lg"
                        : "mob-filter flex-1 py-2.5 text-[11px] font-bold text-center rounded-lg transition-colors text-gray-400 bg-white/5";
                }
            });

            document.querySelectorAll('.sort-btn').forEach(btn => {
                btn.setAttribute('data-active', btn.dataset.val === state.filter.sort);
            });

            document.querySelectorAll('#genres-container button').forEach(btn => {
                const g = btn.dataset.genre;
                const isSelected = state.filter.genres.includes(g);
                btn.className = isSelected 
                    ? "text-[10px] font-bold border border-accent/50 px-3 py-2 rounded-xl text-white bg-accent shadow-[0_0_10px_var(--accent)] transition scale-105"
                    : "text-[10px] font-bold border border-white/10 px-3 py-2 rounded-xl text-gray-400 hover:border-white/30 bg-[#15151a] hover:bg-white/5 transition";
            });
            
            const hasFilter = state.filter.genres.length > 0 || state.filter.type !== 'all' || state.filter.sort !== 'newest' || state.filter.q;
            document.getElementById('active-filter-dot').style.display = hasFilter ? 'block' : 'none';
        };

        // --- FILTER ENGINE ---
        const applyFilters = (resetPage = true) => {
            let res = [...RAW_ITEMS];
            if (state.filter.type !== 'all') res = res.filter(x => x.type === state.filter.type);
            if (state.filter.q) {
                const searchRes = fuse.search(state.filter.q);
                res = searchRes.map(r => r.item);
            }
            if (state.filter.genres.length > 0) {
                res = res.filter(item => state.filter.genres.every(g => (item.genres || []).includes(g)));
            }
            const s = state.filter.sort;
            res.sort((a, b) => {
                if (s === 'chapters') return (parseInt(b.chapter)||0) - (parseInt(a.chapter)||0);
                if (s === 'alpha') return a.titleFa.localeCompare(b.titleFa);
                return new Date(b.updatedAt || 0) - new Date(a.updatedAt || 0);
            });
            state.filtered = res;
            if(resetPage) state.page = 1;
            renderGrid();
            document.getElementById('drawer-count').innerText = res.length.toLocaleString('fa-IR');
        };

        const renderGrid = () => {
            const start = (state.page - 1) * state.limit;
            const end = start + state.limit;
            const slice = state.filtered.slice(start, end);
            const grid = document.getElementById('grid');
            
            document.getElementById('page-num').innerText = state.page.toLocaleString('fa-IR');

            if (slice.length === 0) {
                grid.innerHTML = `
                    <div class="col-span-full flex flex-col items-center justify-center py-32 text-gray-500 opacity-60">
                        <i data-lucide="frown" class="w-16 h-16 mb-4 stroke-1"></i>
                        <span class="text-sm font-bold">Ù‡ÛŒÚ† Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</span>
                    </div>`;
                document.getElementById('pagination').innerHTML = '';
                lucide.createIcons();
                return;
            }

            const isSubbed = state.user && state.user.days > 0;
            
            grid.innerHTML = slice.map(item => {
                const linkHref = `${item.type}/${item.slug}`;
                return `
                <a href="${linkHref}" onclick="App.handleCardClick(event, '${item.type}')" class="manga-card block relative rounded-2xl overflow-hidden bg-[#0e0e12] aspect-[5/7.2] group">
                    <img src="${item.cover}" loading="lazy" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" alt="${item.titleEn}">
                    <div class="absolute inset-0 bg-gradient-to-t from-[#020005] via-transparent to-transparent opacity-80 group-hover:opacity-90 transition-opacity"></div>
                    <div class="absolute inset-0 bg-gradient-to-b from-black/60 to-transparent h-24 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

                    <div class="absolute top-2.5 right-2.5 flex flex-col items-end gap-1.5 transform translate-y-[-10px] opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition duration-300 delay-75">
                         <span class="text-[9px] font-bold px-2 py-0.5 rounded-md bg-white text-black shadow-lg">${item.type}</span>
                         <span class="text-[9px] font-bold px-2 py-0.5 rounded-md bg-rose-500 text-white shadow-lg">${item.status || 'Unknown'}</span>
                    </div>

                    <div class="absolute top-2.5 left-2.5">
                         ${!isSubbed ? `<div class="w-7 h-7 bg-black/50 backdrop-blur rounded-lg flex items-center justify-center text-white/70 border border-white/10"><i data-lucide="lock" class="w-3.5 h-3.5"></i></div>` : ''}
                    </div>

                    <div class="absolute bottom-0 w-full p-4 transform transition duration-300 group-hover:-translate-y-1">
                        <div class="text-[10px] text-accent-glow font-bold mb-1 tracking-wider">CH ${(item.chapter || 0).toLocaleString('fa-IR')}</div>
                        <h3 class="text-xs md:text-sm font-black text-white leading-5 truncate w-full text-glow" dir="rtl">${item.titleFa}</h3>
                    </div>
                </a>
            `}).join('');

            renderPagination(Math.ceil(state.filtered.length / state.limit));
            lucide.createIcons();
        };

        const renderPagination = (totalPages) => {
            const container = document.getElementById('pagination');
            container.innerHTML = '';
            if(totalPages <= 1) return;
            const btn = (p, lbl, act) => 
                `<button onclick="App.goToPage(${p})" class="min-w-[36px] h-9 px-3 rounded-lg text-xs font-bold border transition-all hover:scale-110 active:scale-95 ${act ? 'bg-accent border-accent text-white shadow-[0_0_15px_rgba(124,58,237,0.4)]' : 'border-white/10 bg-white/5 text-gray-400 hover:bg-white/10'}">${lbl}</button>`;
            if(state.page > 1) container.innerHTML += btn(state.page - 1, '<', false);
            let pages = [];
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= state.page - 1 && i <= state.page + 1)) {
                    pages.push(i);
                }
            }
            pages = [...new Set(pages)].sort((a,b) => a-b);
            pages.forEach((p, i) => {
                if (i > 0 && p - pages[i - 1] > 1) container.innerHTML += `<span class="px-2 pt-2 text-gray-600 font-bold">...</span>`;
                container.innerHTML += btn(p, p.toLocaleString('fa-IR'), p === state.page);
            });
            if(state.page < totalPages) container.innerHTML += btn(state.page + 1, '>', false);
        };

        const renderSlider = () => {
            const track = document.getElementById('slider-track');
            const dotCont = document.getElementById('slider-dots');
            const featured = RAW_ITEMS.slice(0, 5); 
            if(!featured.length) { document.getElementById('hero-slider').style.display='none'; return; }
            dotCont.innerHTML = featured.map((_, i) => `<div class="h-1 rounded-full transition-all duration-500 bg-white/30 w-1.5 data-[act=true]:w-8 data-[act=true]:bg-accent" data-id="${i}"></div>`).join('');
            track.innerHTML = featured.map((item, i) => `
                <div class="slide-item absolute inset-0 transition-opacity duration-1000 flex ${i===0 ? 'opacity-100 z-10' : 'opacity-0 z-0'}">
                     <img src="${item.cover}" class="w-full h-full object-cover select-none">
                     <div class="absolute inset-y-0 right-0 w-full md:w-2/3 bg-gradient-to-l from-[#020005] via-[#020005]/80 to-transparent flex flex-col justify-center items-start p-6 md:p-16 pr-8 md:pr-24 text-right">
                         <div class="mb-4">
                            <span class="bg-accent/20 text-accent border border-accent/20 px-3 py-1 rounded text-[10px] font-black uppercase tracking-wider">${item.type}</span>
                         </div>
                         <h2 class="text-3xl md:text-5xl lg:text-6xl font-black text-white leading-tight mb-4 text-glow">${item.titleFa}</h2>
                         <p class="hidden md:block text-gray-400 text-xs md:text-sm leading-7 max-w-xl mb-8 line-clamp-3">${item.summary || 'ØªÙˆØ¶ÛŒØ­Ø§Øª Ø®Ø§ØµÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª...'}</p>
                         <a href="${item.type}/${item.slug}" onclick="App.handleCardClick(event, '${item.type}')" class="group flex items-center gap-3 bg-white text-black px-6 py-3 rounded-xl font-black text-sm hover:bg-accent hover:text-white hover:scale-105 active:scale-95 transition shadow-[0_0_20px_rgba(255,255,255,0.1)] hover:shadow-[0_0_25px_var(--accent)]">
                             <span>Ø´Ø±ÙˆØ¹ Ù…Ø·Ø§Ù„Ø¹Ù‡</span>
                             <i data-lucide="arrow-left" class="w-4 h-4 transition-transform group-hover:-translate-x-1"></i>
                         </a>
                     </div>
                </div>
            `).join('');
            let current = 0;
            const cycle = () => {
                const slides = document.querySelectorAll('.slide-item');
                const dots = Array.from(dotCont.children);
                if(!slides.length) return;
                slides[current].classList.replace('opacity-100','opacity-0');
                slides[current].classList.replace('z-10','z-0');
                dots[current].removeAttribute('data-act');
                current = (current + 1) % slides.length;
                slides[current].classList.replace('opacity-0','opacity-100');
                slides[current].classList.replace('z-0','z-10');
                dots[current].setAttribute('data-act', 'true');
            };
            setInterval(cycle, 6000);
            dotCont.children[0].setAttribute('data-act', 'true');
        };

        // --- PUBLIC API ---
        return {
            init: () => {
                checkAuth();
                renderSlider();
                
                const fDiv = document.getElementById('footer-dynamic-links');
                if (CONFIG.footerLinks) {
                    CONFIG.footerLinks.forEach(grp => {
                        fDiv.innerHTML += `
                            <div class="flex flex-col gap-4">
                                <h4 class="font-bold text-white text-sm border-b border-white/5 pb-2 inline-block self-start">${grp.title}</h4>
                                <div class="flex flex-col gap-2">
                                    ${grp.items.map(lnk => `<a href="${lnk.url}" class="text-gray-400 hover:text-accent text-xs transition">${lnk.text}</a>`).join('')}
                                </div>
                            </div>
                        `;
                    });
                }
                const socialDiv = document.getElementById('social-links');
                if (CONFIG.socials) {
                    CONFIG.socials.forEach(s => {
                        socialDiv.innerHTML += `<a href="${s.url}" class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-gray-400 hover:bg-accent hover:text-white transition transform hover:scale-110"><i data-lucide="${s.icon}" class="w-4 h-4"></i></a>`
                    });
                }

                const allG = [...new Set(RAW_ITEMS.flatMap(x=>x.genres))].sort();
                document.getElementById('genres-container').innerHTML = allG.map(g => 
                    `<button onclick="App.toggleGenre('${g}')" data-genre="${g}" class="text-[10px] font-bold border border-white/10 px-3 py-2 rounded-xl text-gray-400 hover:border-white/30 bg-[#15151a] hover:bg-white/5 transition">${g}</button>`
                ).join('');

                parseHash();
                window.addEventListener('hashchange', parseHash); 
                
                const onSearch = (e) => {
                    state.filter.q = e.target.value;
                    updateHash();
                };
                let timeout = null;
                const debouncedSearch = (e) => {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => onSearch(e), 300);
                };

                document.getElementById('quickSearch').addEventListener('input', debouncedSearch);
                document.getElementById('mobileSearchInput').addEventListener('input', debouncedSearch);
            },
            
            toggleDrawer: () => {
                const body = document.body;
                const isClosed = body.classList.contains('drawer-closed');
                body.classList.toggle('drawer-closed');
                body.classList.toggle('drawer-open');
                const back = document.getElementById('backdrop');
                if(isClosed) back.classList.remove('opacity-0', 'pointer-events-none');
                else back.classList.add('opacity-0', 'pointer-events-none');
            },
            closeDrawerIfMobile: () => {
                if(window.innerWidth < 1024) App.toggleDrawer();
            },
            toggleMobileSearch: () => {
                const bar = document.getElementById('mobile-search-bar');
                const isHidden = bar.style.transform === 'translateY(-200%)' || bar.style.transform === '';
                bar.style.transform = isHidden ? 'translateY(0%)' : 'translateY(-200%)';
                if(isHidden) setTimeout(()=>document.getElementById('mobileSearchInput').focus(), 150);
            },
            
            setType: (t) => { state.filter.type = t; updateHash(); },
            updateSort: (val) => { state.filter.sort = val; updateHash(); },
            toggleGenre: (g) => {
                const idx = state.filter.genres.indexOf(g);
                if (idx > -1) state.filter.genres.splice(idx, 1);
                else state.filter.genres.push(g);
                updateHash();
            },
            clearGenres: () => { state.filter.genres = []; updateHash(); },
            goToPage: (p) => {
                state.page = p;
                renderGrid();
                document.getElementById('main-anchor').scrollIntoView({behavior: 'smooth', block: 'start'});
            },
            
            handleCardClick: (e, type) => {
                if (state.user && state.user.days > 0) return;
                e.preventDefault();
                App.toggleVipModal(true);
            },
            toggleVipModal: (show) => {
                const modal = document.getElementById('vip-modal');
                if(show) {
                    modal.classList.remove('opacity-0', 'pointer-events-none', 'scale-95');
                    modal.classList.add('opacity-100', 'pointer-events-auto', 'scale-100');
                } else {
                    modal.classList.add('opacity-0', 'pointer-events-none', 'scale-95');
                    modal.classList.remove('opacity-100', 'pointer-events-auto', 'scale-100');
                }
            }
        };
    })();

    document.addEventListener('DOMContentLoaded', App.init);
  </script>
</body>
</html>
